<!DOCTYPE html>
<html>
<body>
  <h2>File Upload</h2>
  <form action="/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file">
    <input type="submit" value="Upload File">
  </form>
  <h2>View GIF</h2>
  <!-- Додайте текстове поле для введення ідентифікатора GIF -->
  <input type="text" id="gifIdInput" placeholder="GIF ID">
  <button onclick="openGif('video')">Open as Video</button>
  <button onclick="openGif('img')">Open as Image</button>
  <!-- Використовуйте <video> для відображення GIF -->
  <video id="gifVideo" controls style="display: none;"></video>
  <!-- Використовуйте <img> для відображення GIF -->
  <img id="gifImage" style="display: none;">
  <div id="contentType"></div>
  <div id="gifIdElement"></div>

  <script>
    function openGif(displayType) {
      const gifIdInput = document.getElementById('gifIdInput');
      const gifId = gifIdInput.value; // Отримайте ідентифікатор GIF з текстового поля
      //const gifId = "6528fe22a9522d0ed5b1fd62"; // Замініть на потрібний ідентифікатор GIF
      const gifVideo = document.getElementById('gifVideo');
      const gifImage = document.getElementById('gifImage');


      fetch(`/get-gif/${gifId}`)
        .then(response => {
          if (response.status === 404) {
            console.error('GIF not found');
          } else if (!response.ok) {
            console.error('Error fetching GIF:', response.status);
          } else {
            return response.blob();
          }
        })
        .then(blob => {
          if (blob) {
            const gifUrl = URL.createObjectURL(blob);
            if (displayType === 'video') {
              gifVideo.src = gifUrl;
              gifVideo.style.display = 'block';
            } else if (displayType === 'img') {
              gifImage.src = gifUrl;
              gifImage.style.display = 'block';
            }
          }
        })
        .catch(error => {
          console.error('Error fetching GIF:', error);
        });

      // Відображення contentType
      fetch(`/get-content-type/${gifId}`)
        .then(response => response.text())
        .then(contentType => {
          document.getElementById('contentType').textContent = contentType;
        })
        .catch(error => {
          console.error('Error fetching contentType:', error);
        });
        document.getElementById('gifIdElement').textContent = `GIF ID: ${gifId}`;
    }
  </script>
  
</body>
</html>
